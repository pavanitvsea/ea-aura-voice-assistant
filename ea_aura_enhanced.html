<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>EA Aura - Enhanced Wellness Hub</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            color: #333;
            padding: 10px;
        }

        .main-container {
            max-width: 1400px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
            min-height: 100vh;
        }

        .app-container {
            background: #ffffff;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            border: 1px solid #e0e0e0;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            text-align: center;
            position: relative;
        }

        .logo {
            font-size: 2.2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .tagline {
            font-size: 1em;
            opacity: 0.9;
        }

        .coin-jar {
            position: absolute;
            top: 15px;
            right: 30px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 10px 15px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .coin-jar:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .coin-count {
            font-size: 1.2em;
            font-weight: bold;
        }

        .tab-navigation {
            display: flex;
            background: #f8f9fa;
            border-bottom: 1px solid #e9ecef;
        }

        .tab-btn {
            flex: 1;
            padding: 15px 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            color: #666;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .tab-btn:hover {
            background: #e9ecef;
            color: #333;
        }

        .tab-btn.active {
            color: #667eea;
            border-bottom-color: #667eea;
            background: #ffffff;
        }

        .tab-content {
            padding: 30px;
            min-height: 500px;
        }

        .tab-panel {
            display: none;
        }

        .tab-panel.active {
            display: block;
        }

        /* Genie Character Sidebar */
        .genie-sidebar {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 20px;
            padding: 20px;
            color: white;
            position: sticky;
            top: 10px;
            height: fit-content;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
        }

        .genie-character {
            text-align: center;
            margin-bottom: 20px;
        }

        .genie-avatar {
            width: 120px;
            height: 120px;
            background: linear-gradient(45deg, #ffeaa7, #fab1a0);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            margin: 0 auto 15px;
            animation: float 3s ease-in-out infinite;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .genie-avatar:hover {
            transform: scale(1.1);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        .genie-name {
            font-size: 1.3em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .genie-role {
            font-size: 0.9em;
            opacity: 0.8;
        }

        .genie-chat {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 20px;
            min-height: 200px;
            max-height: 300px;
            overflow-y: auto;
        }

        .genie-message {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 10px;
            margin-bottom: 10px;
            font-size: 0.9em;
            line-height: 1.4;
        }

        .genie-input {
            width: 100%;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            padding: 10px 15px;
            color: white;
            outline: none;
            font-size: 0.9em;
        }

        .genie-input::placeholder {
            color: rgba(255, 255, 255, 0.7);
        }

        /* Wellness Dashboard Styles */
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .metric-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .metric-card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .metric-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 10px;
            background: none;
            border: none;
            text-align: center;
            color: #333;
            width: 100%;
            outline: none;
        }

        .metric-value:focus {
            background: #ffffff;
            border: 2px solid #667eea;
            border-radius: 8px;
            padding: 5px;
        }

        .metric-label {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 15px;
        }

        .progress-bar {
            width: 100%;
            height: 8px;
            background: #e9ecef;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        /* Games Tab Styles */
        .games-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .game-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .game-card:hover {
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .game-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .game-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .game-description {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 15px;
        }

        .play-button {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .play-button:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        /* Wealth Tab Styles */
        .wealth-section {
            background: linear-gradient(135deg, #ffeaa7 0%, #fab1a0 100%);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            color: #333;
        }

        .wealth-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 15px;
            text-align: center;
        }

        .coin-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .coin-stat {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }

        .coin-stat-value {
            font-size: 1.8em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .coin-stat-label {
            font-size: 0.9em;
            opacity: 0.8;
        }

        /* Help Resources */
        .help-resources {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .help-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .help-card:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .help-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .help-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .help-description {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 15px;
        }

        .help-link {
            display: inline-block;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9em;
            transition: all 0.3s ease;
        }

        .help-link:hover {
            transform: scale(1.05);
        }

        /* Coin Animation */
        .coin-animation {
            position: fixed;
            font-size: 2em;
            color: #ffd700;
            pointer-events: none;
            z-index: 1000;
            animation: coinFly 2s ease-out forwards;
        }

        @keyframes coinFly {
            0% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
            50% {
                transform: translateY(-50px) scale(1.2);
            }
            100% {
                opacity: 0;
                transform: translateY(-100px) scale(0.5);
            }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .main-container {
                grid-template-columns: 1fr;
                gap: 15px;
            }
            
            .genie-sidebar {
                order: -1;
            }
        }

        @media (max-width: 768px) {
            .tab-navigation {
                flex-wrap: wrap;
            }
            
            .tab-btn {
                min-width: 50%;
            }
            
            .metric-grid {
                grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
                gap: 15px;
            }
        }
    </style>
</head>
<body>
    <div class="main-container">
        <!-- Main App Container -->
        <div class="app-container">
            <!-- Header with Coin Jar -->
            <div class="header">
                <div class="logo">üåü EA Aura</div>
                <div class="tagline">Your Enhanced Wellness Hub</div>
                <div class="coin-jar" onclick="animateCoinJar()" title="Your Wellness Coins">
                    <span class="coin-count" id="coinCount">1,247</span>
                    <span style="font-size: 1.5em;">ü™ô</span>
                </div>
            </div>

            <!-- Tab Navigation -->
            <div class="tab-navigation">
                <button class="tab-btn active" onclick="switchTab('wellness')">üè• Wellness</button>
                <button class="tab-btn" onclick="switchTab('wealth')">üí∞ Wealth</button>
                <button class="tab-btn" onclick="switchTab('games')">üéÆ Games</button>
                <button class="tab-btn" onclick="switchTab('reports')">üìä Reports</button>
                <button class="tab-btn" onclick="switchTab('help')">‚ùì Help</button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Wellness Tab -->
                <div class="tab-panel active" id="wellness-tab">
                    <h2 style="margin-bottom: 20px;">üìä Your Wellness Dashboard</h2>
                    
                    <div class="metric-grid">
                        <div class="metric-card" onclick="addCoins(10, event)">
                            <input type="text" class="metric-value" id="todaySteps" value="8247" placeholder="Enter steps">
                            <div class="metric-label">Steps Today</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="stepsProgress" style="width: 82%; background: linear-gradient(45deg, #2ecc71, #27ae60);"></div>
                            </div>
                        </div>
                        
                        <div class="metric-card" onclick="addCoins(15, event)">
                            <input type="text" class="metric-value" id="todaySleep" value="7.2" placeholder="Hours">
                            <div class="metric-label">Sleep Last Night (hours)</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="sleepProgress" style="width: 90%; background: linear-gradient(45deg, #3498db, #2980b9);"></div>
                            </div>
                        </div>
                        
                        <div class="metric-card" onclick="addCoins(5, event)">
                            <input type="number" class="metric-value" id="todayMood" value="9" min="1" max="10" placeholder="1-10">
                            <div class="metric-label">Mood Score (1-10)</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="moodProgress" style="width: 90%; background: linear-gradient(45deg, #f39c12, #e67e22);"></div>
                            </div>
                        </div>
                        
                        <div class="metric-card" onclick="addCoins(20, event)">
                            <input type="number" class="metric-value" id="todayFocus" value="145" placeholder="Minutes">
                            <div class="metric-label">Focus Time (minutes)</div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="focusProgress" style="width: 72%; background: linear-gradient(45deg, #9b59b6, #8e44ad);"></div>
                            </div>
                        </div>
                    </div>

                    <div style="background: #e8f0ff; border-radius: 15px; padding: 20px; border: 1px solid #667eea;">
                        <h3 style="color: #667eea; margin-bottom: 10px;">üéØ AI Insights</h3>
                        <p id="aiInsight" style="line-height: 1.5; color: #333;">
                            Great job! Your focus time increased 15% this week. Try the Pomodoro technique for even better concentration. Your sleep quality is excellent - keep that bedtime routine! üåü
                        </p>
                    </div>
                </div>

                <!-- Wealth Tab -->
                <div class="tab-panel" id="wealth-tab">
                    <div class="wealth-section">
                        <div class="wealth-title">üí∞ Your Wellness Wealth</div>
                        
                        <div class="coin-stats">
                            <div class="coin-stat">
                                <div class="coin-stat-value" id="totalCoins">1,247</div>
                                <div class="coin-stat-label">Total Coins</div>
                            </div>
                            <div class="coin-stat">
                                <div class="coin-stat-value" id="todayCoins">127</div>
                                <div class="coin-stat-label">Earned Today</div>
                            </div>
                            <div class="coin-stat">
                                <div class="coin-stat-value" id="weeklyCoins">843</div>
                                <div class="coin-stat-label">This Week</div>
                            </div>
                            <div class="coin-stat">
                                <div class="coin-stat-value">Level 12</div>
                                <div class="coin-stat-label">Wellness Level</div>
                            </div>
                        </div>
                    </div>

                    <h3>üèÜ Recent Achievements</h3>
                    <div class="help-resources">
                        <div class="help-card">
                            <div class="help-icon">üèÉ‚Äç‚ôÇÔ∏è</div>
                            <div class="help-title">Step Master</div>
                            <div class="help-description">Completed 10,000 steps for 7 consecutive days</div>
                            <div style="color: #28a745; font-weight: bold;">+200 Coins</div>
                        </div>
                        <div class="help-card">
                            <div class="help-icon">üßò‚Äç‚ôÄÔ∏è</div>
                            <div class="help-title">Mindful Week</div>
                            <div class="help-description">Meditated daily for an entire week</div>
                            <div style="color: #28a745; font-weight: bold;">+150 Coins</div>
                        </div>
                    </div>
                </div>

                <!-- Games Tab -->
                <div class="tab-panel" id="games-tab">
                    <h2 style="margin-bottom: 20px;">üéÆ Wellness Games</h2>
                    
                    <div class="games-grid">
                        <div class="game-card">
                            <div class="game-icon">üêç</div>
                            <div class="game-title">Snake Game</div>
                            <div class="game-description">Classic snake game to improve focus and hand-eye coordination</div>
                            <button class="play-button" onclick="openSnakeGame()">Play Now</button>
                        </div>
                        
                        <div class="game-card">
                            <div class="game-icon">üÉè</div>
                            <div class="game-title">Memory Cards</div>
                            <div class="game-description">Flip cards and match pairs to boost memory and concentration</div>
                            <button class="play-button" onclick="openMemoryGame()">Play Now</button>
                        </div>
                        
                        <div class="game-card">
                            <div class="game-icon">üî¢</div>
                            <div class="game-title">Sudoku</div>
                            <div class="game-description">Number puzzles to enhance logical thinking and problem-solving</div>
                            <button class="play-button" onclick="openSudokuGame()">Play Now</button>
                        </div>
                        
                        <div class="game-card">
                            <div class="game-icon">üß©</div>
                            <div class="game-title">Puzzle Challenge</div>
                            <div class="game-description">Jigsaw puzzles for relaxation and mindful focus</div>
                            <button class="play-button" onclick="openPuzzleGame()">Play Now</button>
                        </div>
                        
                        <div class="game-card">
                            <div class="game-icon">üéØ</div>
                            <div class="game-title">Focus Trainer</div>
                            <div class="game-description">Attention and concentration exercises designed for gamers</div>
                            <button class="play-button" onclick="openFocusGame()">Play Now</button>
                        </div>
                        
                        <div class="game-card">
                            <div class="game-icon">üåä</div>
                            <div class="game-title">Zen Garden</div>
                            <div class="game-description">Create beautiful zen gardens while practicing mindfulness</div>
                            <button class="play-button" onclick="openZenGame()">Play Now</button>
                        </div>
                    </div>
                </div>

                <!-- Reports Tab -->
                <div class="tab-panel" id="reports-tab">
                    <h2 style="margin-bottom: 20px;">üìä Reports & Data</h2>
                    
                    <div style="background: #f8f9fa; border-radius: 15px; padding: 25px; margin-bottom: 20px;">
                        <h3 style="margin-bottom: 15px;">üìà Export Your Data</h3>
                        <p style="margin-bottom: 15px; color: #666;">Download your wellness data in various formats for personal tracking or sharing with healthcare providers.</p>
                        
                        <div style="display: flex; gap: 15px; flex-wrap: wrap;">
                            <div>
                                <label for="dayCount" style="margin-right: 10px;">Days to export:</label>
                                <input type="number" id="dayCount" value="30" min="7" max="365" style="width: 80px; padding: 8px; border-radius: 5px; border: 1px solid #ccc;">
                            </div>
                            <button class="play-button" onclick="downloadCSV()">üìä Download CSV</button>
                            <button class="play-button" onclick="downloadPDF()">üìÑ Download PDF Report</button>
                            <button class="play-button" onclick="downloadJSON()">üíæ Download JSON</button>
                        </div>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px;">
                        <div style="background: #f8f9fa; border-radius: 15px; padding: 20px;">
                            <h4 style="margin-bottom: 15px;">üìÖ Weekly Summary</h4>
                            <div style="color: #666; line-height: 1.6;">
                                <p>‚Ä¢ Average Steps: 8,234/day</p>
                                <p>‚Ä¢ Average Sleep: 7.3 hours</p>
                                <p>‚Ä¢ Average Mood: 8.2/10</p>
                                <p>‚Ä¢ Total Focus Time: 18.5 hours</p>
                                <p>‚Ä¢ Coins Earned: 843</p>
                            </div>
                        </div>
                        
                        <div style="background: #f8f9fa; border-radius: 15px; padding: 20px;">
                            <h4 style="margin-bottom: 15px;">üéØ Goals Progress</h4>
                            <div style="color: #666; line-height: 1.6;">
                                <p>‚Ä¢ Daily Steps: 8/7 days ‚úÖ</p>
                                <p>‚Ä¢ Sleep 7+ hours: 6/7 days ‚úÖ</p>
                                <p>‚Ä¢ Mood 7+: 7/7 days ‚úÖ</p>
                                <p>‚Ä¢ Focus 2+ hours: 5/7 days ‚ö†Ô∏è</p>
                                <p>‚Ä¢ Weekly Streak: 3 weeks üî•</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Help Tab -->
                <div class="tab-panel" id="help-tab">
                    <h2 style="margin-bottom: 20px;">‚ùì Help & Resources</h2>
                    
                    <div class="help-resources">
                        <div class="help-card">
                            <div class="help-icon">üè•</div>
                            <div class="help-title">Modern Health</div>
                            <div class="help-description">Access professional mental health support, coaching, and wellness resources tailored for EA employees.</div>
                            <a href="https://www.modernhealth.com/" target="_blank" class="help-link">Visit Modern Health</a>
                        </div>
                        
                        <div class="help-card">
                            <div class="help-icon">üçé</div>
                            <div class="help-title">Food Book</div>
                            <div class="help-description">Comprehensive nutrition guidance, meal planning, and healthy eating tips for optimal performance.</div>
                            <a href="https://play.google.com/store/apps/details?id=com.thesmartq.compass.foodbook&hl=en_IN" target="_blank" class="help-link">Get Food Book</a>
                        </div>
                        
                        <div class="help-card">
                            <div class="help-icon">üß†</div>
                            <div class="help-title">EA Employee Assistance</div>
                            <div class="help-description">24/7 confidential support for work-life balance, stress management, and personal challenges.</div>
                            <a href="#" class="help-link">Contact EAP</a>
                        </div>
                        
                        <div class="help-card">
                            <div class="help-icon">üí™</div>
                            <div class="help-title">Fitness Resources</div>
                            <div class="help-description">Exercise routines, ergonomic tips, and movement strategies designed for game developers.</div>
                            <a href="#" class="help-link">View Fitness Guide</a>
                        </div>
                    </div>

                    <div style="background: #e8f0ff; border-radius: 15px; padding: 20px; margin-top: 20px;">
                        <h3 style="color: #667eea; margin-bottom: 15px;">üìñ How to Use EA Aura Enhanced</h3>
                        <div style="color: #333; line-height: 1.6;">
                            <p><strong>üè• Wellness Tab:</strong> Track your daily metrics and earn coins for staying healthy!</p>
                            <p><strong>üí∞ Wealth Tab:</strong> View your wellness coins and achievements</p>
                            <p><strong>üéÆ Games Tab:</strong> Play mindful games that boost cognitive health</p>
                            <p><strong>üìä Reports Tab:</strong> Export and analyze your wellness data</p>
                            <p><strong>üßû‚Äç‚ôÇÔ∏è Genie Assistant:</strong> Ask questions and get personalized wellness advice</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Genie Character Sidebar -->
        <div class="genie-sidebar">
            <div class="genie-character">
                <div class="genie-avatar" onclick="interactWithGenie()">üßû‚Äç‚ôÇÔ∏è</div>
                <div class="genie-name" id="genieName">Aladdin</div>
                <div class="genie-role">Your Wellness Genie</div>
            </div>

            <div class="genie-chat" id="genieChat">
                <div class="genie-message">
                    ‚ú® Welcome! I'm your personal wellness genie. I've been trained on the EA Coaching Pillars to help you on your wellness journey. Click on any wellness metric to earn coins! ü™ô
                </div>
                <div class="genie-message">
                    üéØ I can help you with goal setting, stress management, focus techniques, and much more. What would you like to work on today?
                </div>
            </div>

            <input type="text" class="genie-input" id="genieInput" placeholder="Ask your genie anything..." onkeypress="handleGenieInput(event)">
        </div>
    </div>

    <script>
        let currentCoins = 1247;
        let todayCoins = 127;
        let weeklyCoins = 843;

        // Tab switching functionality
        function switchTab(tabName) {
            // Hide all tab panels
            document.querySelectorAll('.tab-panel').forEach(panel => {
                panel.classList.remove('active');
            });
            
            // Remove active class from all tab buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab panel
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // Add active class to clicked tab button
            event.target.classList.add('active');
        }

        // Coin system functionality
        function addCoins(amount, event) {
            currentCoins += amount;
            todayCoins += amount;
            weeklyCoins += amount;
            
            // Update displays
            document.getElementById('coinCount').textContent = currentCoins.toLocaleString();
            document.getElementById('totalCoins').textContent = currentCoins.toLocaleString();
            document.getElementById('todayCoins').textContent = todayCoins;
            document.getElementById('weeklyCoins').textContent = weeklyCoins;
            
            // Play coin sound
            playCoinSound();
            
            // Animate coin
            animateCoin(event);
            
            // Update genie message
            updateGenieMessage('üéâ Great job! You earned ' + amount + ' coins! Keep up the excellent wellness work!');
        }

        function playCoinSound() {
            // Create a simple coin sound using Web Audio API
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = audioContext.createOscillator();
            const gainNode = audioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioContext.destination);
            
            oscillator.frequency.setValueAtTime(800, audioContext.currentTime);
            oscillator.frequency.exponentialRampToValueAtTime(1200, audioContext.currentTime + 0.1);
            
            gainNode.gain.setValueAtTime(0.3, audioContext.currentTime);
            gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.3);
            
            oscillator.start(audioContext.currentTime);
            oscillator.stop(audioContext.currentTime + 0.3);
        }

        function animateCoin(event) {
            const coinElement = document.createElement('div');
            coinElement.textContent = 'ü™ô';
            coinElement.className = 'coin-animation';
            coinElement.style.left = event.pageX + 'px';
            coinElement.style.top = event.pageY + 'px';
            
            document.body.appendChild(coinElement);
            
            setTimeout(() => {
                document.body.removeChild(coinElement);
            }, 2000);
        }

        function animateCoinJar() {
            const jar = document.querySelector('.coin-jar');
            jar.style.animation = 'none';
            setTimeout(() => {
                jar.style.animation = 'float 0.5s ease-in-out';
            }, 10);
            
            playCoinSound();
        }

        // Genie interaction
        function interactWithGenie() {
            const messages = [
                "‚ú® Ready to boost your wellness? Try updating your daily metrics!",
                "üéØ I notice your focus time is great today! Keep it up!",
                "üí™ Remember: small consistent actions create big changes!",
                "üåü You're doing amazing! Every wellness action earns you coins!",
                "üßò Take a moment to breathe deeply. Wellness is a journey, not a destination."
            ];
            
            const randomMessage = messages[Math.floor(Math.random() * messages.length)];
            updateGenieMessage(randomMessage);
            
            // Animate genie
            const avatar = document.querySelector('.genie-avatar');
            avatar.style.transform = 'scale(1.2)';
            setTimeout(() => {
                avatar.style.transform = 'scale(1)';
            }, 300);
        }

        function updateGenieMessage(message) {
            const chatContainer = document.getElementById('genieChat');
            const messageElement = document.createElement('div');
            messageElement.className = 'genie-message';
            messageElement.textContent = message;
            
            chatContainer.appendChild(messageElement);
            chatContainer.scrollTop = chatContainer.scrollHeight;
            
            // Keep only last 5 messages
            const messages = chatContainer.querySelectorAll('.genie-message');
            if (messages.length > 5) {
                chatContainer.removeChild(messages[0]);
            }
        }

        function handleGenieInput(event) {
            if (event.key === 'Enter') {
                const input = document.getElementById('genieInput');
                const userMessage = input.value.trim();
                
                if (userMessage) {
                    // Add user message
                    const chatContainer = document.getElementById('genieChat');
                    const userMsgElement = document.createElement('div');
                    userMsgElement.className = 'genie-message';
                    userMsgElement.style.background = 'rgba(255, 255, 255, 0.3)';
                    userMsgElement.textContent = 'You: ' + userMessage;
                    chatContainer.appendChild(userMsgElement);
                    
                    // Generate genie response based on AI Coaching Pillars
                    const response = generateGenieResponse(userMessage);
                    setTimeout(() => {
                        updateGenieMessage(response);
                    }, 1000);
                    
                    input.value = '';
                    chatContainer.scrollTop = chatContainer.scrollHeight;
                }
            }
        }

        function generateGenieResponse(userInput) {
            const lowerInput = userInput.toLowerCase();
            
            // Based on AI_Coaching_Pillars_Guide.md
            if (lowerInput.includes('stress') || lowerInput.includes('anxious')) {
                return "üßò I understand you're feeling stressed. Try the 4-7-8 breathing technique: inhale for 4 counts, hold for 7, exhale for 8. This activates your parasympathetic nervous system for instant calm.";
            } else if (lowerInput.includes('sleep') || lowerInput.includes('tired')) {
                return "üò¥ Sleep is crucial for recovery! Aim for 7-9 hours. Try creating a wind-down ritual: dim lights 1 hour before bed, no screens 30 minutes prior, and practice gratitude breathing.";
            } else if (lowerInput.includes('focus') || lowerInput.includes('concentrate')) {
                return "üéØ Let's optimize your focus! Try the Pomodoro Technique: 25-minute deep work blocks with 5-minute breaks. Eliminate distractions and single-task for better quality output.";
            } else if (lowerInput.includes('exercise') || lowerInput.includes('movement')) {
                return "üí™ Movement is medicine! Aim for 8,000-10,000 steps daily. For game developers, take desk breaks every 30 minutes and try the 20-20-20 rule for eye health.";
            } else if (lowerInput.includes('goal') || lowerInput.includes('motivation')) {
                return "üöÄ Let's set SMART goals! Make them Specific, Measurable, Achievable, Relevant, and Time-bound. Break big goals into daily actions and celebrate small wins!";
            } else if (lowerInput.includes('food') || lowerInput.includes('nutrition')) {
                return "üçé Fuel your body right! Aim for 50% vegetables/fruits, 25% lean proteins, 25% whole grains. Stay hydrated with 8-10 glasses of water daily!";
            } else {
                const genericResponses = [
                    "‚ú® That's a great question! Remember, wellness is about small, consistent actions that compound over time.",
                    "üåü I'm here to support your wellness journey! What specific area would you like to focus on - physical, mental, productivity, social, or purpose?",
                    "üíé Every step you take towards wellness is valuable. Which of the five pillars resonates most with you right now?",
                    "üéØ Your wellness journey is unique to you. What feels most important for your well-being today?"
                ];
                return genericResponses[Math.floor(Math.random() * genericResponses.length)];
            }
        }

        // Game functions
        function openSnakeGame() {
            updateGenieMessage("üêç Snake game coming up! This classic game improves focus and reaction time. Great for cognitive wellness!");
            addCoins(50, event);
            alert("Snake game would open here! (Integration with your existing snake game)");
        }

        function openMemoryGame() {
            updateGenieMessage("üÉè Memory games are fantastic for cognitive health! They strengthen neural pathways and improve concentration.");
            addCoins(30, event);
            alert("Simple memory game would open here! Try matching the emoji pairs to boost your memory.");
        }

        function openSudokuGame() {
            updateGenieMessage("üî¢ Sudoku is excellent for logical thinking and mental clarity. Perfect for developers!");
            addCoins(40, event);
            alert("Sudoku game would open here!");
        }

        function openPuzzleGame() {
            updateGenieMessage("üß© Puzzles are wonderful for mindful focus and stress relief. Enjoy the meditative experience!");
            addCoins(35, event);
            alert("Puzzle game would open here!");
        }

        function openFocusGame() {
            updateGenieMessage("üéØ Focus training games help build sustained attention - crucial for productivity!");
            addCoins(45, event);
            alert("Focus trainer would open here!");
        }

        function openZenGame() {
            updateGenieMessage("üåä Zen garden creation is perfect for mindfulness and stress reduction. Let creativity flow!");
            addCoins(25, event);
            alert("Zen garden would open here!");
        }

        // Data export functions
        function downloadCSV() {
            const days = parseInt(document.getElementById('dayCount').value) || 30;
            const csvData = generateSampleData(days);
            downloadFile(csvData, 'ea_aura_wellness_data_' + days + 'days.csv', 'text/csv');
            addCoins(20, event);
            updateGenieMessage('üìä Great! Downloaded ' + days + ' days of wellness data. Regular tracking helps identify patterns and progress!');
        }

        function downloadPDF() {
            updateGenieMessage("üìÑ PDF report feature coming soon! This will include comprehensive wellness analytics and insights.");
            addCoins(15, event);
        }

        function downloadJSON() {
            const data = {
                exportDate: new Date().toISOString(),
                user: "EA Employee",
                wellness_data: {
                    current_metrics: {
                        steps: parseInt(document.getElementById('todaySteps').value),
                        sleep: parseFloat(document.getElementById('todaySleep').value),
                        mood: parseInt(document.getElementById('todayMood').value),
                        focus: parseInt(document.getElementById('todayFocus').value)
                    },
                    coins: {
                        total: currentCoins,
                        today: todayCoins,
                        weekly: weeklyCoins
                    }
                }
            };
            
            downloadFile(JSON.stringify(data, null, 2), 'ea_aura_data_' + new Date().toISOString().split('T')[0] + '.json', 'application/json');
            addCoins(25, event);
            updateGenieMessage("üíæ JSON data exported! Perfect for developers who want to integrate with other tools and apps.");
        }

        function generateSampleData(days) {
            let csv = 'Date,Steps,Sleep_Hours,Mood_Score,Stress_Level,Focus_Minutes,Coins_Earned,Gratitude_Entries,Water_Glasses,Exercise_Minutes,Screen_Time_Hours,Meditation_Minutes\n';
            
            const today = new Date();
            for (let i = days - 1; i >= 0; i--) {
                const date = new Date(today);
                date.setDate(date.getDate() - i);
                
                const steps = Math.floor(Math.random() * 5000) + 5000;
                const sleep = (Math.random() * 3 + 6).toFixed(1);
                const mood = Math.floor(Math.random() * 3) + 8;
                const stress = Math.floor(Math.random() * 4) + 1;
                const focus = Math.floor(Math.random() * 120) + 60;
                const coins = Math.floor(Math.random() * 100) + 50;
                const gratitude = Math.floor(Math.random() * 4);
                const water = Math.floor(Math.random() * 4) + 6;
                const exercise = Math.floor(Math.random() * 60) + 20;
                const screenTime = (Math.random() * 4 + 4).toFixed(1);
                const meditation = Math.floor(Math.random() * 20) + 5;
                
                csv += date.toISOString().split('T')[0] + ',' + steps + ',' + sleep + ',' + mood + ',' + stress + ',' + focus + ',' + coins + ',' + gratitude + ',' + water + ',' + exercise + ',' + screenTime + ',' + meditation + '\n';
            }
            
            return csv;
        }

        function downloadFile(content, filename, contentType) {
            const blob = new Blob([content], { type: contentType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        // Update progress bars based on input values
        function updateProgressBars() {
            const steps = parseInt(document.getElementById('todaySteps').value) || 0;
            const sleep = parseFloat(document.getElementById('todaySleep').value) || 0;
            const mood = parseInt(document.getElementById('todayMood').value) || 0;
            const focus = parseInt(document.getElementById('todayFocus').value) || 0;

            document.getElementById('stepsProgress').style.width = Math.min(100, (steps / 10000) * 100) + '%';
            document.getElementById('sleepProgress').style.width = Math.min(100, (sleep / 9) * 100) + '%';
            document.getElementById('moodProgress').style.width = (mood / 10) * 100 + '%';
            document.getElementById('focusProgress').style.width = Math.min(100, (focus / 200) * 100) + '%';
        }

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            // Setup metric input listeners
            document.querySelectorAll('.metric-value').forEach(input => {
                input.addEventListener('input', updateProgressBars);
                input.addEventListener('blur', updateProgressBars);
            });

            // Initial progress bar update
            updateProgressBars();

            // Welcome message from genie
            setTimeout(() => {
                updateGenieMessage("üåü Welcome to EA Aura Enhanced! I've been trained on comprehensive wellness coaching principles. Click any metric to earn coins and improve your wellness!");
            }, 2000);
        });
    </script>
</body>
</html>