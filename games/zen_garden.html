<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zen Garden - Mindfulness & Relaxation</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #9C27B0 0%, #673AB7 100%);
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            min-height: 100vh;
        }
        
        .game-container {
            background: rgba(255, 255, 255, 0.1);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            text-align: center;
            backdrop-filter: blur(10px);
            max-width: 800px;
        }
        
        h1 {
            margin-bottom: 10px;
            font-size: 2.5rem;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }
        
        .subtitle {
            margin-bottom: 20px;
            opacity: 0.9;
            font-size: 1.1rem;
        }
        
        .score-panel {
            margin: 20px 0;
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }
        
        .score-item {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px 20px;
            border-radius: 15px;
            backdrop-filter: blur(5px);
            min-width: 80px;
        }
        
        .score-value {
            font-size: 1.8rem;
            font-weight: bold;
            display: block;
        }
        
        .score-label {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .zen-garden {
            width: 600px;
            height: 400px;
            background: linear-gradient(45deg, #F5F5DC, #DEB887);
            border: 5px solid #8D6E63;
            border-radius: 15px;
            margin: 20px auto;
            position: relative;
            cursor: crosshair;
            overflow: hidden;
            box-shadow: inset 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .zen-garden canvas {
            width: 100%;
            height: 100%;
            border-radius: 10px;
        }
        
        .tools-panel {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .tool-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .tool-btn:hover, .tool-btn.active {
            background: white;
            color: #9C27B0;
            transform: translateY(-2px);
        }
        
        .patterns-panel {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
        }
        
        .patterns-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .pattern-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid rgba(255, 255, 255, 0.3);
            padding: 10px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }
        
        .pattern-btn:hover {
            background: white;
            color: #9C27B0;
        }
        
        .mindfulness-guide {
            background: rgba(76, 175, 80, 0.2);
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid rgba(76, 175, 80, 0.5);
        }
        
        .breathing-indicator {
            width: 60px;
            height: 60px;
            border: 3px solid #4CAF50;
            border-radius: 50%;
            margin: 15px auto;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
            transition: transform 4s ease-in-out;
        }
        
        .breathing-indicator.inhale {
            transform: scale(1.3);
            background: rgba(76, 175, 80, 0.3);
        }
        
        .breathing-indicator.exhale {
            transform: scale(0.7);
            background: rgba(76, 175, 80, 0.1);
        }
        
        .controls {
            margin: 20px 0;
        }
        
        .btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 2px solid white;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            cursor: pointer;
            margin: 5px;
            transition: all 0.3s ease;
        }
        
        .btn:hover {
            background: white;
            color: #9C27B0;
            transform: translateY(-2px);
        }
        
        .zen-quotes {
            font-style: italic;
            opacity: 0.8;
            margin: 15px 0;
            font-size: 1.1rem;
        }
    </style>
</head>
<body>
    <div class="game-container">
        <h1>üßò Zen Garden</h1>
        <p class="subtitle">Digital Raking for Mindfulness & Stress Relief</p>
        
        <div class="score-panel">
            <div class="score-item">
                <span class="score-value" id="rakeStrokes">0</span>
                <span class="score-label">Rake Strokes</span>
            </div>
            <div class="score-item">
                <span class="score-value" id="patternsCreated">0</span>
                <span class="score-label">Patterns</span>
            </div>
            <div class="score-item">
                <span class="score-value" id="coins">0</span>
                <span class="score-label">Peace Coins</span>
            </div>
            <div class="score-item">
                <span class="score-value" id="zenLevel">1</span>
                <span class="score-label">Zen Level</span>
            </div>
        </div>
        
        <div class="zen-garden" id="zenGarden">
            <canvas id="gardenCanvas" width="600" height="400"></canvas>
        </div>
        
        <div class="tools-panel">
            <button class="tool-btn active" id="rakeTool" onclick="selectTool('rake')">
                <span>ü•Ñ</span> Rake
            </button>
            <button class="tool-btn" id="stoneTool" onclick="selectTool('stone')">
                <span>ü™®</span> Place Stone
            </button>
            <button class="tool-btn" id="plantTool" onclick="selectTool('plant')">
                <span>üå±</span> Add Plant
            </button>
            <button class="tool-btn" id="clearTool" onclick="selectTool('clear')">
                <span>‚ú®</span> Clear Area
            </button>
        </div>
        
        <div class="patterns-panel">
            <h3>üé® Sacred Patterns</h3>
            <div class="patterns-grid">
                <button class="pattern-btn" onclick="createPattern('circles')">Circles</button>
                <button class="pattern-btn" onclick="createPattern('waves')">Waves</button>
                <button class="pattern-btn" onclick="createPattern('spiral')">Spiral</button>
                <button class="pattern-btn" onclick="createPattern('lines')">Lines</button>
                <button class="pattern-btn" onclick="createPattern('mandala')">Mandala</button>
                <button class="pattern-btn" onclick="createPattern('zen')">Zen</button>
            </div>
        </div>
        
        <div class="mindfulness-guide" id="mindfulnessGuide" style="display: none;">
            <h3>üßò Mindful Breathing</h3>
            <p>Focus on your breath while creating patterns</p>
            <div class="breathing-indicator" id="breathingIndicator">BREATHE</div>
            <p id="breathingText">Prepare to breathe...</p>
            <button class="btn" onclick="stopMindfulness()">Stop Mindfulness</button>
        </div>
        
        <div class="zen-quotes" id="zenQuote">
            "The quieter you become, the more you can hear." - Ram Dass
        </div>
        
        <div class="controls">
            <button class="btn" onclick="clearGarden()">Clear Garden</button>
            <button class="btn" onclick="saveGarden()">Save Garden</button>
            <button class="btn" onclick="startMindfulness()">Mindful Mode</button>
            <button class="btn" onclick="playAmbientSounds()">üîä Nature Sounds</button>
        </div>
    </div>

    <script>
        // Game variables
        let gameState = {
            currentTool: 'rake',
            rakeStrokes: 0,
            patternsCreated: 0,
            coins: 0,
            zenLevel: 1,
            isDrawing: false,
            stones: [],
            plants: []
        };
        
        // Canvas setup
        const canvas = document.getElementById('gardenCanvas');
        const ctx = canvas.getContext('2d');
        
        // Zen quotes
        const zenQuotes = [
            "The quieter you become, the more you can hear. - Ram Dass",
            "Peace comes from within. Do not seek it without. - Buddha",
            "In the midst of movement and chaos, keep stillness inside of you. - Deepak Chopra",
            "The present moment is the only time over which we have dominion. - Th√≠ch Nh·∫•t H·∫°nh",
            "Wherever you are, be there totally. - Eckhart Tolle",
            "The way is not in the sky. The way is in the heart. - Buddha",
            "Calm mind brings inner strength and self-confidence. - Dalai Lama"
        ];
        
        // Initialize canvas
        function initCanvas() {
            // Create sand texture background
            const gradient = ctx.createLinearGradient(0, 0, canvas.width, canvas.height);
            gradient.addColorStop(0, '#F5F5DC');
            gradient.addColorStop(0.5, '#DEB887');
            gradient.addColorStop(1, '#D2B48C');
            
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Add subtle sand texture
            addSandTexture();
        }
        
        function addSandTexture() {
            const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
            const data = imageData.data;
            
            for (let i = 0; i < data.length; i += 4) {
                const noise = (Math.random() - 0.5) * 20;
                data[i] += noise;     // Red
                data[i + 1] += noise; // Green
                data[i + 2] += noise; // Blue
            }
            
            ctx.putImageData(imageData, 0, 0);
        }
        
        // Tool selection
        function selectTool(tool) {
            gameState.currentTool = tool;
            
            // Update UI
            document.querySelectorAll('.tool-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.getElementById(tool + 'Tool').classList.add('active');
            
            // Change cursor
            const garden = document.getElementById('zenGarden');
            switch (tool) {
                case 'rake':
                    garden.style.cursor = 'crosshair';
                    break;
                case 'stone':
                    garden.style.cursor = 'pointer';
                    break;
                case 'plant':
                    garden.style.cursor = 'pointer';
                    break;
                case 'clear':
                    garden.style.cursor = 'grab';
                    break;
            }
        }
        
        // Mouse/touch events
        canvas.addEventListener('mousedown', startDrawing);
        canvas.addEventListener('mousemove', draw);
        canvas.addEventListener('mouseup', stopDrawing);
        canvas.addEventListener('mouseout', stopDrawing);
        
        // Touch events for mobile
        canvas.addEventListener('touchstart', handleTouch);
        canvas.addEventListener('touchmove', handleTouch);
        canvas.addEventListener('touchend', stopDrawing);
        
        function handleTouch(e) {
            e.preventDefault();
            const touch = e.touches[0];
            const rect = canvas.getBoundingClientRect();
            const x = touch.clientX - rect.left;
            const y = touch.clientY - rect.top;
            
            if (e.type === 'touchstart') {
                startDrawing({offsetX: x, offsetY: y});
            } else if (e.type === 'touchmove') {
                draw({offsetX: x, offsetY: y});
            }
        }
        
        function startDrawing(e) {
            gameState.isDrawing = true;
            
            const x = e.offsetX;
            const y = e.offsetY;
            
            switch (gameState.currentTool) {
                case 'rake':
                    ctx.beginPath();
                    ctx.moveTo(x, y);
                    break;
                case 'stone':
                    placeStone(x, y);
                    break;
                case 'plant':
                    placePlant(x, y);
                    break;
                case 'clear':
                    clearArea(x, y);
                    break;
            }
        }
        
        function draw(e) {
            if (!gameState.isDrawing || gameState.currentTool !== 'rake') return;
            
            const x = e.offsetX;
            const y = e.offsetY;
            
            // Draw rake lines
            ctx.lineWidth = 3;
            ctx.strokeStyle = '#8D6E63';
            ctx.lineCap = 'round';
            ctx.lineJoin = 'round';
            
            ctx.lineTo(x, y);
            ctx.stroke();
            
            gameState.rakeStrokes++;
            
            // Award coins for raking
            if (gameState.rakeStrokes % 10 === 0) {
                gameState.coins += 2;
                
                if (gameState.rakeStrokes % 50 === 0) {
                    gameState.zenLevel++;
                    showZenMessage("Zen level increased! üßò‚Äç‚ôÄÔ∏è");
                }
            }
            
            updateUI();
        }
        
        function stopDrawing() {
            gameState.isDrawing = false;
            
            // Change zen quote occasionally
            if (Math.random() < 0.1) {
                changeZenQuote();
            }
        }
        
        function placeStone(x, y) {
            // Draw a stone
            const size = 15 + Math.random() * 20;
            
            ctx.fillStyle = '#696969';
            ctx.beginPath();
            ctx.ellipse(x, y, size, size * 0.8, 0, 0, 2 * Math.PI);
            ctx.fill();
            
            // Add highlight
            ctx.fillStyle = '#A9A9A9';
            ctx.beginPath();
            ctx.ellipse(x - size/3, y - size/3, size/3, size/4, 0, 0, 2 * Math.PI);
            ctx.fill();
            
            gameState.stones.push({x, y, size});
            gameState.coins += 5;
            updateUI();
        }
        
        function placePlant(x, y) {
            // Draw a small plant
            const plantTypes = ['üå±', 'üçÉ', 'üåø'];
            const plant = plantTypes[Math.floor(Math.random() * plantTypes.length)];
            
            ctx.font = '20px serif';
            ctx.fillText(plant, x - 10, y + 10);
            
            gameState.plants.push({x, y, type: plant});
            gameState.coins += 8;
            updateUI();
        }
        
        function clearArea(x, y) {
            // Clear a circular area
            ctx.save();
            ctx.globalCompositeOperation = 'destination-out';
            ctx.beginPath();
            ctx.arc(x, y, 30, 0, 2 * Math.PI);
            ctx.fill();
            ctx.restore();
            
            // Restore sand background in cleared area
            const gradient = ctx.createRadialGradient(x, y, 0, x, y, 30);
            gradient.addColorStop(0, '#F5F5DC');
            gradient.addColorStop(1, '#DEB887');
            
            ctx.fillStyle = gradient;
            ctx.beginPath();
            ctx.arc(x, y, 30, 0, 2 * Math.PI);
            ctx.fill();
        }
        
        // Pattern creation functions
        function createPattern(patternType) {
            switch (patternType) {
                case 'circles':
                    createCirclePattern();
                    break;
                case 'waves':
                    createWavePattern();
                    break;
                case 'spiral':
                    createSpiralPattern();
                    break;
                case 'lines':
                    createLinePattern();
                    break;
                case 'mandala':
                    createMandalaPattern();
                    break;
                case 'zen':
                    createZenPattern();
                    break;
            }
            
            gameState.patternsCreated++;
            gameState.coins += 15;
            updateUI();
        }
        
        function createCirclePattern() {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            ctx.strokeStyle = '#8D6E63';
            ctx.lineWidth = 2;
            
            for (let i = 1; i <= 5; i++) {
                ctx.beginPath();
                ctx.arc(centerX, centerY, i * 30, 0, 2 * Math.PI);
                ctx.stroke();
            }
        }
        
        function createWavePattern() {
            ctx.strokeStyle = '#8D6E63';
            ctx.lineWidth = 3;
            
            for (let y = 50; y < canvas.height; y += 40) {
                ctx.beginPath();
                for (let x = 0; x < canvas.width; x += 5) {
                    const waveY = y + Math.sin(x * 0.02) * 20;
                    if (x === 0) {
                        ctx.moveTo(x, waveY);
                    } else {
                        ctx.lineTo(x, waveY);
                    }
                }
                ctx.stroke();
            }
        }
        
        function createSpiralPattern() {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            ctx.strokeStyle = '#8D6E63';
            ctx.lineWidth = 2;
            ctx.beginPath();
            
            for (let i = 0; i < 1000; i++) {
                const angle = i * 0.1;
                const radius = i * 0.1;
                const x = centerX + radius * Math.cos(angle);
                const y = centerY + radius * Math.sin(angle);
                
                if (i === 0) {
                    ctx.moveTo(x, y);
                } else {
                    ctx.lineTo(x, y);
                }
            }
            ctx.stroke();
        }
        
        function createLinePattern() {
            ctx.strokeStyle = '#8D6E63';
            ctx.lineWidth = 2;
            
            // Vertical lines
            for (let x = 50; x < canvas.width; x += 60) {
                ctx.beginPath();
                ctx.moveTo(x, 20);
                ctx.lineTo(x, canvas.height - 20);
                ctx.stroke();
            }
        }
        
        function createMandalaPattern() {
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            
            ctx.strokeStyle = '#8D6E63';
            ctx.lineWidth = 2;
            
            // Create petals
            for (let i = 0; i < 8; i++) {
                const angle = (i * Math.PI) / 4;
                ctx.beginPath();
                ctx.arc(
                    centerX + Math.cos(angle) * 60,
                    centerY + Math.sin(angle) * 60,
                    30, 0, 2 * Math.PI
                );
                ctx.stroke();
            }
            
            // Center circle
            ctx.beginPath();
            ctx.arc(centerX, centerY, 20, 0, 2 * Math.PI);
            ctx.stroke();
        }
        
        function createZenPattern() {
            // Yin-yang inspired pattern
            const centerX = canvas.width / 2;
            const centerY = canvas.height / 2;
            const radius = 80;
            
            ctx.strokeStyle = '#8D6E63';
            ctx.lineWidth = 3;
            
            // Outer circle
            ctx.beginPath();
            ctx.arc(centerX, centerY, radius, 0, 2 * Math.PI);
            ctx.stroke();
            
            // Inner S curve
            ctx.beginPath();
            ctx.arc(centerX, centerY - radius/2, radius/2, 0, Math.PI);
            ctx.arc(centerX, centerY + radius/2, radius/2, Math.PI, 2 * Math.PI);
            ctx.stroke();
        }
        
        // Mindfulness features
        function startMindfulness() {
            document.getElementById('mindfulnessGuide').style.display = 'block';
            
            const indicator = document.getElementById('breathingIndicator');
            const text = document.getElementById('breathingText');
            
            let phase = 'inhale';
            
            const breathingCycle = setInterval(() => {
                if (phase === 'inhale') {
                    text.textContent = 'Inhale slowly and deeply...';
                    indicator.className = 'breathing-indicator inhale';
                    phase = 'exhale';
                } else {
                    text.textContent = 'Exhale slowly and release...';
                    indicator.className = 'breathing-indicator exhale';
                    phase = 'inhale';
                }
            }, 4000);
            
            // Store interval to clear later
            gameState.breathingInterval = breathingCycle;
            
            // Auto award mindfulness coins
            gameState.mindfulnessCoins = setInterval(() => {
                gameState.coins += 3;
                updateUI();
            }, 10000);
        }
        
        function stopMindfulness() {
            document.getElementById('mindfulnessGuide').style.display = 'none';
            clearInterval(gameState.breathingInterval);
            clearInterval(gameState.mindfulnessCoins);
        }
        
        function playAmbientSounds() {
            // In a real implementation, this would play nature sounds
            showZenMessage("üéµ Imagine the sound of gentle rain and wind through trees...");
        }
        
        function changeZenQuote() {
            const randomQuote = zenQuotes[Math.floor(Math.random() * zenQuotes.length)];
            document.getElementById('zenQuote').textContent = randomQuote;
        }
        
        function showZenMessage(message) {
            const messageEl = document.createElement('div');
            messageEl.style.cssText = `
                position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%);
                background: rgba(76, 175, 80, 0.9); color: white; padding: 20px 40px;
                border-radius: 25px; font-size: 1.2rem; z-index: 1000;
                animation: fadeInOut 3s ease-in-out;
            `;
            messageEl.textContent = message;
            
            // Add CSS animation
            const style = document.createElement('style');
            style.textContent = `
                @keyframes fadeInOut {
                    0%, 100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
                    20%, 80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
                }
            `;
            document.head.appendChild(style);
            
            document.body.appendChild(messageEl);
            
            setTimeout(() => {
                document.body.removeChild(messageEl);
            }, 3000);
        }
        
        function clearGarden() {
            if (confirm('Clear your zen garden? This will reset your current creation.')) {
                initCanvas();
                gameState.stones = [];
                gameState.plants = [];
            }
        }
        
        function saveGarden() {
            // In a real implementation, this would save the canvas as an image
            gameState.coins += 20;
            updateUI();
            showZenMessage('Garden saved! +20 Peace Coins');
        }
        
        function updateUI() {
            document.getElementById('rakeStrokes').textContent = gameState.rakeStrokes;
            document.getElementById('patternsCreated').textContent = gameState.patternsCreated;
            document.getElementById('coins').textContent = gameState.coins;
            document.getElementById('zenLevel').textContent = gameState.zenLevel;
        }
        
        // Initialize the zen garden
        initCanvas();
        changeZenQuote();
        
        // Auto-change quotes every 30 seconds
        setInterval(changeZenQuote, 30000);
    </script>
</body>
</html>